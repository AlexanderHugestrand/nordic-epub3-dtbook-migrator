<?xml version="1.0" encoding="UTF-8"?>
<x:description xmlns:x="http://www.jenitennison.com/xslt/xspec" stylesheet="../../main/resources/xml/xslt/make-uris-relative-to-document.xsl" xmlns="http://www.w3.org/1999/xhtml">

    <x:scenario label="Basic example with external resources">
        <x:context>
            <html xml:base="file:/tmp/dir/file.xhtml">
                <head/>
                <body>
                    <section xml:base="file:/tmp/dir/a.xhtml">
                        <a href="link1"/>
                        <img src="img/img2"/>
                    </section>
                    <section xml:base="file:/tmp/dir/chapter/b.xhtml">
                        <a href="link2"/>
                        <img src="img/img2"/>
                    </section>
                </body>
            </html>
        </x:context>
        <x:expect label="URIs should be made relative to the document instead of the element and xml:base attributes should be removed">
            <html xml:base="file:/tmp/dir/file.xhtml">
                <head/>
                <body>
                    <section>
                        <a href="link1"/>
                        <img src="img/img2"/>
                    </section>
                    <section>
                        <a href="chapter/link2"/>
                        <img src="chapter/img/img2"/>
                    </section>
                </body>
            </html>
        </x:expect>
    </x:scenario>
    
    <x:scenario label="Inter-document links">
        <x:context>
            <html xml:base="file:/tmp/dir/file.xhtml">
                <head/>
                <body id="outlineid">
                    <section xml:base="file:/tmp/dir/a.xhtml" id="id1">
                        <a href="chapter/b.xhtml#id1"/>
                    </section>
                    <section xml:base="file:/tmp/dir/chapter/b.xhtml">
                        <h2 id="id1">Headline</h2>
                        <a href="../a.xhtml#id1"/>
                    </section>
                </body>
            </html>
        </x:context>
        <x:expect label="Internal links should be used (starting with '#')">
            <html xml:base="file:/tmp/dir/file.xhtml">
                <head/>
                <body id="doc0_outlineid">
                    <section id="doc1_id1">
                        <a href="#doc2_id1"/>
                    </section>
                    <section>
                        <h2 id="doc2_id1">Headline</h2>
                        <a href="#doc1_id1"/>
                    </section>
                </body>
            </html>
        </x:expect>
    </x:scenario>

</x:description>
